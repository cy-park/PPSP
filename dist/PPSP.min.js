(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define(["SlideScroll"],function(n){return e.PPSP=t(n)})}else if(typeof module==="object"&&module.exports){module.exports=e.PPSP=t(require("SlideScroll"))}else{e.PPSP=t(e.SlideScroll)}})(typeof window!=="undefined"?window:this,function(e){"use strict";var t;function n(n){t=this;n=n||{};for(var o in n){t[o]=n[o]}t.ss=new e(n.SlideScroll);t.el=document.querySelectorAll(t.selector);t.currentIndex=0}function o(e){var n=t.el[e];return n.hasAttribute("data-sp-skip")||window.getComputedStyle(n,null).getPropertyValue("display")==="none"?true:false}function r(e){e=e||t.currentIndex;var n=e-1;if(n>0)return o(n)?r(n):n;return 0}function i(e){e=e||t.currentIndex;var n=e+1;if(n<t.el.length-1)return o(n)?i(n):n;return t.el.length-1}function l(){var e=0,n=t.el[0].getBoundingClientRect().top;for(var l=1;l<t.el.length;l++){var u=t.el[l].getBoundingClientRect().top;if(Math.abs(n)>Math.abs(u)){e=l;n=u}else{if(o(e)){var s=r(e),d=i(e);var f=t.el[s].getBoundingClientRect().top,c=t.el[d].getBoundingClientRect().top;if(Math.abs(f)<Math.abs(c))e=s;else e=d}break}}return e}n.prototype.prev=function(e,n){t.goto(r(),e,n)};n.prototype.next=function(e,n){t.goto(i(),e,n)};n.prototype.goto=function(e,n,l){if(l&&l.constructor!==Array)l=[l];if(o(e))e=t.currentIndex-e<0?i(e):r(e);var u=window.pageYOffset+t.el[e].getBoundingClientRect().top;t.ss.to(u,function(){t.currentIndex=e;if(n)n.apply(null,l)})};n.prototype.snap=function(){if(t.el[t.currentIndex].getBoundingClientRect().top!==0)t.goto(l())};n.prototype.refresh=function(e){e=e||t.selector;t.el=document.querySelectorAll(e);t.snap()};window.addEventListener("wheel",function(e){e.preventDefault();if(!t.ss._is_scrolling){if(e.deltaY<0)t.prev();else t.next()}});window.addEventListener("keydown",function(e){if(e.key==="ArrowDown"){t.next()}else if(e.key==="ArrowUp"){t.prev()}else if(e.key===" "){if(e.shiftKey)t.prev();else t.next()}else{}});window.addEventListener("scroll",function(e){console.log("scrolled");window.setTimeout(t.snap,500)});window.addEventListener("resize",function(e){window.setTimeout(t.snap,500)});return n});